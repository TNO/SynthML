= UML model requirements

== Definitions
[cols="1,1"]
|===
|Contextual element
| class, property, and activity.

| members
| Specific for activity: owned attributes and owned behaviors.

| UML model
| ...
|===

== Requirements for Synthesis

=== Name
* A name of a contextual element, e.g., class, property, and activity, must be unique within the UML model.
* A name cannot contain two (or more) consecutive underscores.
* A name must start with either a letter or an underscore, and possibly followed by digits, letters and underscores, i.e., adhere to the regular expression `[a-zA-Z_][0-9a-zA-Z_]*`.

=== Type
Poka Yoke supports only a subset of the UML types.
In particular, Poka Yoke supports

* Boolean
* Enumeration
** declared in model at outer-most level
** with at least one literal
* Integer 
** with bounded range

=== Class
* The class may not contain nested classifiers.
* The class must have a classifier behavior.
* The class must own its classifier behavior.

=== Property
* The multiplicity interval of a property must be [1,1]. In other words,
** The property must be single-valued.
** The property must be mandatory.
* The <<type>> of a property must be supported.
* A property may have a default value.
** The multiplicity interval of a default value of a property is [0,1].
** The type of the default value of a property must be an instance of the type of that property.
** The default value of a property is not allowed to refer to other properties.

=== Activity
* An activity must have exactly one initial node.
* An activity may not have any owned attributes.
* An activity may not have any owned behaviors.
* An activity may not have a classifier behavior.

=== Activity Edge
* The type of an activity edge must be control flow.
* The source of an actvity edge must be a decision node.
* An activity edge may have a guard expression.
** The type of the guard expression must be Boolean.

=== Activity Node
Only, instances of the following types are supported

* Call Behavior Action,
* Opaque Action, and
* Control Node, which includes
** Decision Node
** Final Node
** Fork Node
** Initial Node
** Join Node
** Merge Node

=== Call Behavior Action
* The call graph of call behavior actions may not contain any cycle.
* The behavior of a call behavior action must be an activity.
* A call behavior action may have a guard expression.
** The type of the guard expression must be Boolean.
* A call behavior action may have any number of non-determinitics effects.
** An effect can update any number of variables, i.e., zero or more.
** An effect may update a particular variable at most once.
** The <<type>> of a particular variable and its update must be identical.

Note that the guard and effects on a call behavior action hide all contained sub-activities, including their guards and effects.  

=== Opaque Expression
* An opaque expression must have exactly one expression body.
