<?xml version="1.0" encoding="ASCII"?>
<uml:Model xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:uml="http://www.eclipse.org/uml2/5.0.0/UML" name="NewModel">
  <packagedElement xsi:type="uml:Class" name="NewClass" classifierBehavior="//NewClass/NewActivity">
    <ownedAttribute name="active" isStatic="true">
      <type xsi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
      <defaultValue xsi:type="uml:LiteralString" value=""/>
    </ownedAttribute>
    <ownedBehavior xsi:type="uml:Activity" name="NewActivity" node="//NewClass/NewActivity/NewInitial //NewClass/NewActivity/NewActivityFinal //NewClass/NewActivity/@ownedNode.2 //NewClass/NewActivity/@ownedNode.3">
      <edge xsi:type="uml:ControlFlow" target="//NewClass/NewActivity/NewActivityFinal" source="//NewClass/NewActivity/@ownedNode.2"/>
      <edge xsi:type="uml:ControlFlow" target="//NewClass/NewActivity/@ownedNode.2" source="//NewClass/NewActivity/NewInitial"/>
      <edge xsi:type="uml:ControlFlow" target="//NewClass/NewActivity/@ownedNode.3" source="//NewClass/NewActivity/@ownedNode.2"/>
      <ownedNode xsi:type="uml:InitialNode" name="NewInitial" outgoing="//NewClass/NewActivity/@edge.1"/>
      <ownedNode xsi:type="uml:ActivityFinalNode" name="NewActivityFinal" incoming="//NewClass/NewActivity/@edge.0"/>
      <ownedNode xsi:type="uml:ForkNode" incoming="//NewClass/NewActivity/@edge.1" outgoing="//NewClass/NewActivity/@edge.0 //NewClass/NewActivity/@edge.2"/>
      <ownedNode xsi:type="uml:CallBehaviorAction" incoming="//NewClass/NewActivity/@edge.2" behavior="//Lock/lockhandler"/>
    </ownedBehavior>
  </packagedElement>
  <packagedElement xsi:type="uml:Class" name="Lock">
    <ownedBehavior xsi:type="uml:Activity" name="lockhandler" node="//Lock/lockhandler/@ownedNode.0 //Lock/lockhandler/@ownedNode.1 //Lock/lockhandler/@ownedNode.2 //Lock/lockhandler/@ownedNode.3 //Lock/lockhandler/@ownedNode.4 //Lock/lockhandler/@ownedNode.5 //Lock/lockhandler/@ownedNode.6 //Lock/lockhandler/@ownedNode.7">
      <edge xsi:type="uml:ControlFlow" target="//Lock/lockhandler/@ownedNode.1" source="//Lock/lockhandler/@ownedNode.0"/>
      <edge xsi:type="uml:ControlFlow" target="//Lock/lockhandler/@ownedNode.2" source="//Lock/lockhandler/@ownedNode.1"/>
      <edge xsi:type="uml:ObjectFlow" target="//Lock/lockhandler/@ownedNode.3/msg" source="//Lock/lockhandler/@ownedNode.2/msg"/>
      <edge xsi:type="uml:ObjectFlow" target="//Lock/lockhandler/@ownedNode.4/requester" source="//Lock/lockhandler/@ownedNode.3/requester"/>
      <edge xsi:type="uml:ControlFlow" target="//Lock/lockhandler/@ownedNode.5" source="//Lock/lockhandler/@ownedNode.4"/>
      <edge xsi:type="uml:ControlFlow" target="//Lock/lockhandler/@ownedNode.6" source="//Lock/lockhandler/@ownedNode.5"/>
      <edge xsi:type="uml:ControlFlow" target="//Lock/lockhandler/@ownedNode.7" source="//Lock/lockhandler/@ownedNode.6"/>
      <edge xsi:type="uml:ObjectFlow" target="//Lock/lockhandler/@ownedNode.7" source="//Lock/lockhandler/@ownedNode.6/isReleased"/>
      <edge xsi:type="uml:ControlFlow" target="//Lock/lockhandler/@ownedNode.1" source="//Lock/lockhandler/@ownedNode.7">
        <guard xsi:type="uml:OpaqueExpression">
          <body>isReleased</body>
          <language>Python</language>
        </guard>
      </edge>
      <edge xsi:type="uml:ControlFlow" target="//Lock/lockhandler/@ownedNode.5" source="//Lock/lockhandler/@ownedNode.7">
        <guard xsi:type="uml:OpaqueExpression">
          <body>else</body>
          <language>Python</language>
        </guard>
      </edge>
      <ownedNode xsi:type="uml:InitialNode" outgoing="//Lock/lockhandler/@edge.0"/>
      <ownedNode xsi:type="uml:MergeNode" incoming="//Lock/lockhandler/@edge.0 //Lock/lockhandler/@edge.8" outgoing="//Lock/lockhandler/@edge.1"/>
      <ownedNode xsi:type="uml:AcceptEventAction" incoming="//Lock/lockhandler/@edge.1">
        <result name="msg" outgoing="//Lock/lockhandler/@edge.2" type="//Lock/acquire" isOrdered="true" isUnique="false"/>
        <trigger event="//@packagedElement.2"/>
      </ownedNode>
      <ownedNode xsi:type="uml:ReadStructuralFeatureAction" structuralFeature="//Lock/acquire/requester">
        <object name="msg" incoming="//Lock/lockhandler/@edge.2" type="//Lock/acquire"/>
        <result name="requester" outgoing="//Lock/lockhandler/@edge.3">
          <type xsi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </result>
      </ownedNode>
      <ownedNode xsi:type="uml:OpaqueAction" outgoing="//Lock/lockhandler/@edge.4">
        <body>active = requester</body>
        <inputValue name="requester" incoming="//Lock/lockhandler/@edge.3">
          <type xsi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </inputValue>
        <language>Python</language>
      </ownedNode>
      <ownedNode xsi:type="uml:MergeNode" incoming="//Lock/lockhandler/@edge.4 //Lock/lockhandler/@edge.9" outgoing="//Lock/lockhandler/@edge.5"/>
      <ownedNode xsi:type="uml:OpaqueAction" incoming="//Lock/lockhandler/@edge.5" outgoing="//Lock/lockhandler/@edge.6">
        <body>active == ''</body>
        <language>Python</language>
        <outputValue name="isReleased" outgoing="//Lock/lockhandler/@edge.7">
          <type xsi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Boolean"/>
        </outputValue>
      </ownedNode>
      <ownedNode xsi:type="uml:DecisionNode" incoming="//Lock/lockhandler/@edge.6 //Lock/lockhandler/@edge.7" outgoing="//Lock/lockhandler/@edge.8 //Lock/lockhandler/@edge.9"/>
    </ownedBehavior>
    <nestedClassifier xsi:type="uml:Signal" name="acquire">
      <ownedAttribute name="requester">
        <type xsi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
      </ownedAttribute>
    </nestedClassifier>
  </packagedElement>
  <packagedElement xsi:type="uml:SignalEvent" visibility="public" signal="//Lock/acquire"/>
</uml:Model>
