enum RobotLocation = Location1, Location2;
enum UnknownBool = True, False, Unknown;
plant automaton Context:
  controllable prepare_robot;
  controllable robot_move_to_location1;
  controllable robot_move_to_location2;
  controllable robot_adjust_product;
  controllable robot_release_product_at_location2;
  controllable prepare_location2;
  controllable measure_product_position;
  uncontrollable measure_product_position_result_1;
  uncontrollable measure_product_position_result_2;
  disc bool robotPrepared = false;
  disc bool location2Prepared = false;
  disc RobotLocation robotLocation = Location1;
  disc bool robotHasProduct = true;
  disc bool location2HasProduct = false;
  disc UnknownBool productCorrectlyPlaced = Unknown;
  location:
    initial;
    marked;
    edge measure_product_position when location2Prepared and location2HasProduct and productCorrectlyPlaced = Unknown;
    edge measure_product_position_result_1 do productCorrectlyPlaced := True;
    edge measure_product_position_result_2 do productCorrectlyPlaced := False;
    edge prepare_location2 when not location2Prepared do location2Prepared := true;
    edge prepare_robot when not robotPrepared do robotPrepared := true;
    edge robot_adjust_product when robotPrepared and productCorrectlyPlaced = False do productCorrectlyPlaced := Unknown;
    edge robot_move_to_location1 when robotPrepared do robotLocation := Location1;
    edge robot_move_to_location2 when robotPrepared do robotLocation := Location2;
    edge robot_release_product_at_location2 when robotPrepared and robotLocation = Location2 do robotHasProduct := false, location2HasProduct := true;
end
plant automaton constraint:
  location idle:
    initial;
    marked;
    edge Context.measure_product_position goto busy;
    edge Context.prepare_robot;
    edge Context.robot_move_to_location2;
    edge Context.robot_adjust_product;
    edge Context.robot_release_product_at_location2;
    edge Context.prepare_location2;
    edge Context.robot_move_to_location1;
  location busy:
    edge Context.measure_product_position_result_1 goto idle;
    edge Context.measure_product_position_result_2 goto idle;
end
supervisor automaton Prepare_robot_happens_once:
  location NotYetOccurred:
    initial;
    marked;
    edge Context.prepare_robot goto Occurred;
  location Occurred:
    marked;
end
supervisor automaton Robot_move_to_Location2_happens_once:
  location NotYetOccurred:
    initial;
    marked;
    edge Context.robot_move_to_location2 goto Occurred;
  location Occurred:
    marked;
end
supervisor automaton Robot_release_product_at_location2_happens_once:
  location NotYetOccurred:
    initial;
    marked;
    edge Context.robot_release_product_at_location2 goto Occurred;
  location Occurred:
    marked;
end
supervisor automaton Prepare_Location2_happens_once:
  location NotYetOccurred:
    initial;
    marked;
    edge Context.prepare_location2 goto Occurred;
  location Occurred:
    marked;
end
supervisor automaton Post:
  controllable c_satisfied;
  alg bool condition = not Context.robotHasProduct and Context.robotLocation = Location1 and Context.location2HasProduct and Context.productCorrectlyPlaced = True;
  location NotSatisfied:
    initial;
    edge c_satisfied when condition goto Satisfied;
  location Satisfied:
    marked;
end
supervisor automaton sup:
  alphabet Context.measure_product_position, Context.prepare_location2, Context.prepare_robot, Context.robot_adjust_product, Context.robot_move_to_location1, Context.robot_move_to_location2, Context.robot_release_product_at_location2, Post.c_satisfied;
  location:
    initial;
    marked;
    edge Context.measure_product_position when Post.NotSatisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location2)) and (constraint.idle and (Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred)));
    edge Context.prepare_location2 when Post.NotSatisfied and not Context.robotHasProduct and (Context.location2HasProduct and (Robot_release_product_at_location2_happens_once.Occurred and Context.productCorrectlyPlaced = True)) and (constraint.idle and (Context.robotPrepared and not Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.NotYetOccurred and Prepare_robot_happens_once.Occurred))) or (Post.NotSatisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location2)) and (constraint.idle and (Context.robotPrepared and not Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.NotYetOccurred and Prepare_robot_happens_once.Occurred))) or Post.NotSatisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = False and Context.robotLocation = Location2)) and (constraint.idle and (Context.robotPrepared and not Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.NotYetOccurred and Prepare_robot_happens_once.Occurred)))) or (Post.NotSatisfied and (Context.robotHasProduct and not Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location1)) and (constraint.idle and (not Context.robotPrepared and not Context.location2Prepared) and (Robot_move_to_Location2_happens_once.NotYetOccurred and (Prepare_Location2_happens_once.NotYetOccurred and Prepare_robot_happens_once.NotYetOccurred))) or Post.NotSatisfied and (Context.robotHasProduct and not Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location1)) and (constraint.idle and (Context.robotPrepared and not Context.location2Prepared) and (Robot_move_to_Location2_happens_once.NotYetOccurred and (Prepare_Location2_happens_once.NotYetOccurred and Prepare_robot_happens_once.Occurred))) or (Post.NotSatisfied and (Context.robotHasProduct and not Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location2)) and (constraint.idle and (Context.robotPrepared and not Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.NotYetOccurred and Prepare_robot_happens_once.Occurred))) or Post.Satisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = True and Context.robotLocation = Location1)) and (constraint.idle and (Context.robotPrepared and not Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.NotYetOccurred and Prepare_robot_happens_once.Occurred)))));
    edge Context.prepare_robot when Post.NotSatisfied and not Context.robotHasProduct and (Context.location2HasProduct and (Robot_release_product_at_location2_happens_once.Occurred and Context.productCorrectlyPlaced = True)) and (constraint.idle and (not Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.NotYetOccurred))) or (Post.NotSatisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location2)) and (constraint.idle and (not Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.NotYetOccurred))) or Post.NotSatisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = False and Context.robotLocation = Location2)) and (constraint.idle and (not Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.NotYetOccurred)))) or (Post.NotSatisfied and (Context.robotHasProduct and not Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location1)) and (constraint.idle and (not Context.robotPrepared and not Context.location2Prepared) and (Robot_move_to_Location2_happens_once.NotYetOccurred and (Prepare_Location2_happens_once.NotYetOccurred and Prepare_robot_happens_once.NotYetOccurred))) or Post.NotSatisfied and (Context.robotHasProduct and not Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location1)) and (constraint.idle and (not Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.NotYetOccurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.NotYetOccurred))) or (Post.NotSatisfied and (Context.robotHasProduct and not Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location2)) and (constraint.idle and (not Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.NotYetOccurred))) or Post.Satisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = True and Context.robotLocation = Location1)) and (constraint.idle and (not Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.NotYetOccurred)))));
    edge Context.robot_adjust_product when Post.NotSatisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = False and Context.robotLocation = Location2)) and (constraint.idle and (Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred))) or Post.NotSatisfied and (Context.robotHasProduct and not Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = False and Context.robotLocation = Location2)) and (constraint.idle and (Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred)));
    edge Context.robot_move_to_location1 when Post.NotSatisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = True and Context.robotLocation = Location2)) and (constraint.idle and (Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred))) or Post.NotSatisfied and (Context.robotHasProduct and not Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location2)) and (constraint.idle and (Context.robotPrepared and not Context.location2Prepared) and (Robot_move_to_Location2_happens_once.NotYetOccurred and (Prepare_Location2_happens_once.NotYetOccurred and Prepare_robot_happens_once.Occurred))) or (Post.NotSatisfied and (Context.robotHasProduct and not Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location2)) and (constraint.idle and (Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.NotYetOccurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred))) or Post.Satisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = True and Context.robotLocation = Location2)) and (constraint.idle and (Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred))));
    edge Context.robot_move_to_location2 when Post.NotSatisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced != False and Context.robotLocation = Location1)) and (constraint.idle and (Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.NotYetOccurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred))) or (Post.NotSatisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = False and Context.robotLocation = Location1)) and (constraint.idle and (Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.NotYetOccurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred))) or Post.NotSatisfied and (Context.robotHasProduct and not Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = Unknown and Context.robotLocation = Location1)) and (constraint.idle and (Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.NotYetOccurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred))));
    edge Context.robot_release_product_at_location2 when Post.NotSatisfied and Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced != False and (Context.robotLocation = Location2 and constraint.idle)) and (Context.robotPrepared and Context.location2Prepared and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred))) or Post.NotSatisfied and Robot_release_product_at_location2_happens_once.NotYetOccurred and (Context.productCorrectlyPlaced = False and (Context.robotLocation = Location2 and constraint.idle)) and (Context.robotPrepared and Context.location2Prepared and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred)));
    edge Post.c_satisfied when Post.NotSatisfied and (not Context.robotHasProduct and Context.location2HasProduct) and (Robot_release_product_at_location2_happens_once.Occurred and (Context.productCorrectlyPlaced = True and Context.robotLocation = Location1)) and (constraint.idle and (Context.robotPrepared and Context.location2Prepared) and (Robot_move_to_Location2_happens_once.Occurred and (Prepare_Location2_happens_once.Occurred and Prepare_robot_happens_once.Occurred)));
end
