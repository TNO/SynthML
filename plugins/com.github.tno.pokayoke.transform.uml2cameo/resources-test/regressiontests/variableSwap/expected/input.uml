<?xml version="1.0" encoding="UTF-8"?>
<uml:Model xmi:version="20131001" xmlns:xmi="http://www.omg.org/spec/XMI/20131001" xmlns:uml="http://www.eclipse.org/uml2/5.0.0/UML" xmi:id="1" name="Model">
  <packagedElement xmi:type="uml:Class" xmi:id="2" name="System" visibility="public" classifierBehavior="13" isActive="true">
    <ownedAttribute xmi:id="3" name="a" visibility="public">
      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Boolean"/>
      <lowerValue xmi:type="uml:LiteralInteger" xmi:id="4" value="1"/>
      <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="5" value="1"/>
      <defaultValue xmi:type="uml:LiteralBoolean" xmi:id="6"/>
    </ownedAttribute>
    <ownedAttribute xmi:id="7" name="b" visibility="public">
      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Boolean"/>
      <lowerValue xmi:type="uml:LiteralInteger" xmi:id="8" value="1"/>
      <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="9" value="1"/>
      <defaultValue xmi:type="uml:LiteralBoolean" xmi:id="10"/>
    </ownedAttribute>
    <ownedAttribute xmi:id="11" name="active" isStatic="true">
      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
      <defaultValue xmi:type="uml:LiteralString" xmi:id="12" value=""/>
    </ownedAttribute>
    <ownedBehavior xmi:type="uml:Activity" xmi:id="13" name="Main" node="112 113 114 115 116">
      <ownedBehavior xmi:type="uml:Activity" xmi:id="14" name="A" node="104 105 106 107">
        <ownedBehavior xmi:type="uml:Activity" xmi:id="15" name="A__start" node="39 40 41 43 44 46 48 49 50 53 54 56 57">
          <edge xmi:type="uml:ControlFlow" xmi:id="16" target="40" source="39"/>
          <edge xmi:type="uml:ControlFlow" xmi:id="17" target="41" source="40"/>
          <edge xmi:type="uml:ControlFlow" xmi:id="18" target="43" source="41"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="19" target="43" source="42"/>
          <edge xmi:type="uml:ControlFlow" xmi:id="20" target="40" source="43">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="21">
              <language>Python</language>
              <body>else</body>
            </guard>
          </edge>
          <edge xmi:type="uml:ControlFlow" xmi:id="22" target="46" source="43">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="23">
              <language>Python</language>
              <body>doesGuardHold</body>
            </guard>
          </edge>
          <edge xmi:type="uml:ObjectFlow" xmi:id="24" target="48" source="47"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="25" target="45" source="48"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="26" target="49" source="48"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="27" target="51" source="49"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="28" target="53" source="52"/>
          <edge xmi:type="uml:ControlFlow" xmi:id="29" target="54" source="53">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="30">
              <language>Python</language>
              <body>active == requester</body>
            </guard>
          </edge>
          <edge xmi:type="uml:ObjectFlow" xmi:id="31" target="49" source="53">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="32">
              <language>Python</language>
              <body>else</body>
            </guard>
          </edge>
          <edge xmi:type="uml:ControlFlow" xmi:id="33" target="56" source="54"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="34" target="56" source="55"/>
          <edge xmi:type="uml:ControlFlow" xmi:id="35" target="57" source="56">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="36">
              <language>Python</language>
              <body>isSuccessful</body>
            </guard>
          </edge>
          <edge xmi:type="uml:ControlFlow" xmi:id="37" target="40" source="56">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="38">
              <language>Python</language>
              <body>else</body>
            </guard>
          </edge>
          <node xmi:type="uml:InitialNode" xmi:id="39" outgoing="16"/>
          <node xmi:type="uml:MergeNode" xmi:id="40" incoming="16 20 37" outgoing="17"/>
          <node xmi:type="uml:OpaqueAction" xmi:id="41" incoming="17" outgoing="18">
            <language>Python</language>
            <outputValue xmi:id="42" name="doesGuardHold" outgoing="19">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Boolean"/>
            </outputValue>
            <body>True</body>
          </node>
          <node xmi:type="uml:DecisionNode" xmi:id="43" incoming="18 19" outgoing="20 22"/>
          <node xmi:type="uml:SendSignalAction" xmi:id="44" signal="145">
            <argument xmi:id="45" name="requester" incoming="25">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </argument>
          </node>
          <node xmi:type="uml:OpaqueAction" xmi:id="46" incoming="22">
            <language>Python</language>
            <outputValue xmi:id="47" name="requester" outgoing="24">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </outputValue>
            <body>import uuid&#xD;
requester  = &quot;A__start_&quot; + str(uuid.uuid4())</body>
          </node>
          <node xmi:type="uml:ForkNode" xmi:id="48" incoming="24" outgoing="25 26"/>
          <node xmi:type="uml:MergeNode" xmi:id="49" incoming="26 31" outgoing="27"/>
          <node xmi:type="uml:OpaqueAction" xmi:id="50">
            <inputValue xmi:id="51" name="requester" incoming="27">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </inputValue>
            <outputValue xmi:id="52" name="requester" outgoing="28">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </outputValue>
          </node>
          <node xmi:type="uml:DecisionNode" xmi:id="53" incoming="28" outgoing="29 31"/>
          <node xmi:type="uml:OpaqueAction" xmi:id="54" incoming="29" outgoing="33">
            <language>Python</language>
            <outputValue xmi:id="55" name="isSuccessful" outgoing="34">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Boolean"/>
            </outputValue>
            <body>guard = True
pass
active = ''
isSuccessful = guard</body>
          </node>
          <node xmi:type="uml:DecisionNode" xmi:id="56" incoming="33 34" outgoing="35 37"/>
          <node xmi:type="uml:ActivityFinalNode" xmi:id="57" incoming="35"/>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:Activity" xmi:id="58" name="A__end" node="82 83 84 86 87 89 91 92 93 96 97 99 100">
          <edge xmi:type="uml:ControlFlow" xmi:id="59" target="83" source="82"/>
          <edge xmi:type="uml:ControlFlow" xmi:id="60" target="84" source="83"/>
          <edge xmi:type="uml:ControlFlow" xmi:id="61" target="86" source="84"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="62" target="86" source="85"/>
          <edge xmi:type="uml:ControlFlow" xmi:id="63" target="83" source="86">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="64">
              <language>Python</language>
              <body>else</body>
            </guard>
          </edge>
          <edge xmi:type="uml:ControlFlow" xmi:id="65" target="89" source="86">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="66">
              <language>Python</language>
              <body>doesGuardHold</body>
            </guard>
          </edge>
          <edge xmi:type="uml:ObjectFlow" xmi:id="67" target="91" source="90"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="68" target="88" source="91"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="69" target="92" source="91"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="70" target="94" source="92"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="71" target="96" source="95"/>
          <edge xmi:type="uml:ControlFlow" xmi:id="72" target="97" source="96">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="73">
              <language>Python</language>
              <body>active == requester</body>
            </guard>
          </edge>
          <edge xmi:type="uml:ObjectFlow" xmi:id="74" target="92" source="96">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="75">
              <language>Python</language>
              <body>else</body>
            </guard>
          </edge>
          <edge xmi:type="uml:ControlFlow" xmi:id="76" target="99" source="97"/>
          <edge xmi:type="uml:ObjectFlow" xmi:id="77" target="99" source="98"/>
          <edge xmi:type="uml:ControlFlow" xmi:id="78" target="100" source="99">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="79">
              <language>Python</language>
              <body>isSuccessful</body>
            </guard>
          </edge>
          <edge xmi:type="uml:ControlFlow" xmi:id="80" target="83" source="99">
            <guard xmi:type="uml:OpaqueExpression" xmi:id="81">
              <language>Python</language>
              <body>else</body>
            </guard>
          </edge>
          <node xmi:type="uml:InitialNode" xmi:id="82" outgoing="59"/>
          <node xmi:type="uml:MergeNode" xmi:id="83" incoming="59 63 80" outgoing="60"/>
          <node xmi:type="uml:OpaqueAction" xmi:id="84" incoming="60" outgoing="61">
            <language>Python</language>
            <outputValue xmi:id="85" name="doesGuardHold" outgoing="62">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Boolean"/>
            </outputValue>
            <body>True</body>
          </node>
          <node xmi:type="uml:DecisionNode" xmi:id="86" incoming="61 62" outgoing="63 65"/>
          <node xmi:type="uml:SendSignalAction" xmi:id="87" signal="145">
            <argument xmi:id="88" name="requester" incoming="68">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </argument>
          </node>
          <node xmi:type="uml:OpaqueAction" xmi:id="89" incoming="65">
            <language>Python</language>
            <outputValue xmi:id="90" name="requester" outgoing="67">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </outputValue>
            <body>import uuid&#xD;
requester  = &quot;A__end_&quot; + str(uuid.uuid4())</body>
          </node>
          <node xmi:type="uml:ForkNode" xmi:id="91" incoming="67" outgoing="68 69"/>
          <node xmi:type="uml:MergeNode" xmi:id="92" incoming="69 74" outgoing="70"/>
          <node xmi:type="uml:OpaqueAction" xmi:id="93">
            <inputValue xmi:id="94" name="requester" incoming="70">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </inputValue>
            <outputValue xmi:id="95" name="requester" outgoing="71">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
            </outputValue>
          </node>
          <node xmi:type="uml:DecisionNode" xmi:id="96" incoming="71" outgoing="72 74"/>
          <node xmi:type="uml:OpaqueAction" xmi:id="97" incoming="72" outgoing="76">
            <language>Python</language>
            <outputValue xmi:id="98" name="isSuccessful" outgoing="77">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Boolean"/>
            </outputValue>
            <body>guard = True
if guard:
	pre__b = b
	pre__a = a
	a = pre__b
	b = pre__a
pass
active = ''
isSuccessful = guard</body>
          </node>
          <node xmi:type="uml:DecisionNode" xmi:id="99" incoming="76 77" outgoing="78 80"/>
          <node xmi:type="uml:ActivityFinalNode" xmi:id="100" incoming="78"/>
        </ownedBehavior>
        <edge xmi:type="uml:ControlFlow" xmi:id="101" target="105" source="104"/>
        <edge xmi:type="uml:ControlFlow" xmi:id="102" target="106" source="105"/>
        <edge xmi:type="uml:ControlFlow" xmi:id="103" target="107" source="106"/>
        <node xmi:type="uml:InitialNode" xmi:id="104" outgoing="101"/>
        <node xmi:type="uml:CallBehaviorAction" xmi:id="105" name="A__start" incoming="101" outgoing="102" behavior="15"/>
        <node xmi:type="uml:CallBehaviorAction" xmi:id="106" name="A__end" incoming="102" outgoing="103" behavior="58"/>
        <node xmi:type="uml:ActivityFinalNode" xmi:id="107" incoming="103"/>
      </ownedBehavior>
      <edge xmi:type="uml:ControlFlow" xmi:id="108" target="114" source="115"/>
      <edge xmi:type="uml:ControlFlow" xmi:id="109" target="113" source="114"/>
      <edge xmi:type="uml:ControlFlow" xmi:id="110" target="115" source="112"/>
      <edge xmi:type="uml:ControlFlow" xmi:id="111" target="116" source="115"/>
      <node xmi:type="uml:InitialNode" xmi:id="112" name="" outgoing="110"/>
      <node xmi:type="uml:ActivityFinalNode" xmi:id="113" name="" incoming="109"/>
      <node xmi:type="uml:CallBehaviorAction" xmi:id="114" name="A" incoming="108" outgoing="109" behavior="14"/>
      <node xmi:type="uml:ForkNode" xmi:id="115" incoming="110" outgoing="108 111"/>
      <node xmi:type="uml:CallBehaviorAction" xmi:id="116" incoming="111" behavior="118"/>
    </ownedBehavior>
  </packagedElement>
  <packagedElement xmi:type="uml:Class" xmi:id="117" name="Lock">
    <ownedBehavior xmi:type="uml:Activity" xmi:id="118" name="lockhandler" node="131 132 133 136 139 141 142 144">
      <edge xmi:type="uml:ControlFlow" xmi:id="119" target="132" source="131"/>
      <edge xmi:type="uml:ControlFlow" xmi:id="120" target="133" source="132"/>
      <edge xmi:type="uml:ObjectFlow" xmi:id="121" target="137" source="134"/>
      <edge xmi:type="uml:ObjectFlow" xmi:id="122" target="140" source="138"/>
      <edge xmi:type="uml:ControlFlow" xmi:id="123" target="141" source="139"/>
      <edge xmi:type="uml:ControlFlow" xmi:id="124" target="142" source="141"/>
      <edge xmi:type="uml:ControlFlow" xmi:id="125" target="144" source="142"/>
      <edge xmi:type="uml:ObjectFlow" xmi:id="126" target="144" source="143"/>
      <edge xmi:type="uml:ControlFlow" xmi:id="127" target="132" source="144">
        <guard xmi:type="uml:OpaqueExpression" xmi:id="128">
          <language>Python</language>
          <body>isReleased</body>
        </guard>
      </edge>
      <edge xmi:type="uml:ControlFlow" xmi:id="129" target="141" source="144">
        <guard xmi:type="uml:OpaqueExpression" xmi:id="130">
          <language>Python</language>
          <body>else</body>
        </guard>
      </edge>
      <node xmi:type="uml:InitialNode" xmi:id="131" outgoing="119"/>
      <node xmi:type="uml:MergeNode" xmi:id="132" incoming="119 127" outgoing="120"/>
      <node xmi:type="uml:AcceptEventAction" xmi:id="133" incoming="120">
        <result xmi:id="134" name="msg" outgoing="121" type="145" isOrdered="true" isUnique="false"/>
        <trigger xmi:id="135" event="147"/>
      </node>
      <node xmi:type="uml:ReadStructuralFeatureAction" xmi:id="136" structuralFeature="146">
        <object xmi:id="137" name="msg" incoming="121" type="145"/>
        <result xmi:id="138" name="requester" outgoing="122">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </result>
      </node>
      <node xmi:type="uml:OpaqueAction" xmi:id="139" outgoing="123">
        <inputValue xmi:id="140" name="requester" incoming="122">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </inputValue>
        <language>Python</language>
        <body>active = requester</body>
      </node>
      <node xmi:type="uml:MergeNode" xmi:id="141" incoming="123 129" outgoing="124"/>
      <node xmi:type="uml:OpaqueAction" xmi:id="142" incoming="124" outgoing="125">
        <language>Python</language>
        <outputValue xmi:id="143" name="isReleased" outgoing="126">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Boolean"/>
        </outputValue>
        <body>active == ''</body>
      </node>
      <node xmi:type="uml:DecisionNode" xmi:id="144" incoming="125 126" outgoing="127 129"/>
    </ownedBehavior>
    <nestedClassifier xmi:type="uml:Signal" xmi:id="145" name="acquire">
      <ownedAttribute xmi:id="146" name="requester">
        <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
      </ownedAttribute>
    </nestedClassifier>
  </packagedElement>
  <packagedElement xmi:type="uml:SignalEvent" xmi:id="147" visibility="public" signal="145"/>
</uml:Model>
